var m=Object.defineProperty;var w=(c,e,t)=>e in c?m(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var a=(c,e,t)=>(w(c,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();class g{constructor(e,t){a(this,"apiKey");a(this,"baseUrl");this.apiKey=e,this.baseUrl=t}async fetchData(e){try{const t=await fetch(`${this.baseUrl}${e}&appid=${this.apiKey}`);if(!t.ok)throw new Error("City not found");return await t.json()}catch(t){throw t}}}class I{processWeatherData(e){const t={},n={},r=e.list[0].dt_txt.split(" ")[0].split("-")[2];return e.list.forEach(s=>{const o=s.dt_txt.split(" ")[0].split("-")[2],l=Math.round(s.main.temp_max-273.15),f=s.dt_txt.split(" ")[1];o!==r&&(t[o]?l>t[o]&&(t[o]=l):t[o]=l,f==="15:00:00"&&(n[o]=s.weather[0].main))}),{maxTemperatureByDay:t,iconsByDay:n}}}class b{constructor(){a(this,"wrapper");a(this,"weather");a(this,"weatherIcon");a(this,"degrees");a(this,"cityName");a(this,"parameters");a(this,"speedWind");a(this,"humidity");a(this,"errorMessage");a(this,"weekCard");a(this,"forecastInscription");this.wrapper=document.querySelector(".wrapper"),this.weather=document.querySelector(".weather"),this.weatherIcon=document.querySelector(".weather__icon"),this.degrees=document.querySelector(".weather__degrees"),this.cityName=document.querySelector(".weather__city"),this.parameters=document.querySelector(".parameters"),this.speedWind=document.querySelector(".parameters__speed-wind"),this.humidity=document.querySelector(".parameters__humidity"),this.errorMessage=document.querySelector(".error-message"),this.weekCard=document.querySelector(".week"),this.forecastInscription=document.querySelector(".forecast-inscription")}updateUI(e){this.degrees.innerHTML=Math.floor(e.list[0].main.temp-273.15)+"&#176;",this.cityName.innerHTML=e.city.name,this.speedWind.innerHTML="wind: "+e.list[0].wind.speed+"m/s",this.humidity.innerHTML="humidity: "+e.list[0].main.humidity+"%",this.weather.style.display="flex",this.weatherIcon.style.display="flex",this.parameters.style.display="flex",this.errorMessage.style.display="none";const t=e.list[0].weather[0].main;this.setBackgroundAndIcon(t)}setBackgroundAndIcon(e){const t={Clouds:{background:"/weather-forecast/images/clouds.jpg",icon:"/weather-forecast/icons/cloudsIcon.png"},Clear:{background:"/weather-forecast/images/clearSky.jpg",icon:"/weather-forecast/icons/sunIcon.png"},Rain:{background:"/weather-forecast/images/rain.jpg",icon:"/weather-forecast/icons/rainIcon.png"},Mist:{background:"/weather-forecast/images/mist.png",icon:"/weather-forecast/icons/mistIcon.png"},Haze:{background:"/weather-forecast/images/haze.jpg",icon:"/weather-forecast/icons/hazeIcon.png"},default:{background:"none",icon:"/weather-forecast/icons/defaultIcon.png"}},{background:n,icon:r}=t[e]||t.default;this.wrapper.style.backgroundImage=`url('${n}')`,this.weatherIcon.src=r}createWeekCard(e,t){this.weekCard.textContent="",this.weekCard.style.display="flex";let n=0;for(const[r,s]of Object.entries(e)){if(n>=4)break;const o=document.createElement("div");o.className="card",o.innerHTML=`
        <h3>${r}</h3>
        <img src="${this.getIconSrc(t[r])}" alt="${t[r]}"/>
        <p>${s}Â°</p>
      `,this.forecastInscription.style.display="block",this.weekCard.appendChild(o),n++}}getIconSrc(e){const t={Clouds:"/weather-forecast/icons/cloudsIcon.png",Clear:"/weather-forecast/icons/sunIcon.png",Rain:"/weather-forecast/icons/rainIcon.png",Mist:"/weather-forecast/icons/mistIcon.png",Haze:"/weather-forecast/icons/hazeIcon.png",default:"/weather-forecast/icons/defaultIcon.png"};return t[e]||t.default}showError(e){this.weekCard.textContent="",this.errorMessage.textContent=`City: '${e}' not found`,this.errorMessage.style.display="block",this.weather.style.display="none",this.parameters.style.display="none",this.forecastInscription.style.display="none",this.wrapper.style.backgroundImage="none"}}const k="7023c4f8b61573243ceb881918b43235",S="https://api.openweathermap.org/data/2.5/forecast?q=",_=new g(k,S),C=new I,h=new b,i=document.querySelector(".search__input"),u=document.querySelector(".search__btn--icon"),p=document.querySelector(".myForm"),d=document.querySelector(".loader");i&&u&&p&&d&&(u.addEventListener("click",y),p.addEventListener("submit",y));async function y(c){if(c&&i){c.preventDefault();const e=i.value.trim();if(e){d&&(d.style.display="block");try{const t=await _.fetchData(e);h.updateUI(t);const{maxTemperatureByDay:n,iconsByDay:r}=C.processWeatherData(t);h.createWeekCard(n,r)}catch{h.showError(e)}finally{i&&d&&(i.value="",d.style.display="none")}}}}
