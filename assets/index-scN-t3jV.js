var f=Object.defineProperty;var g=(c,e,t)=>e in c?f(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var o=(c,e,t)=>(g(c,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class w{constructor(e,t){o(this,"apiKey");o(this,"baseUrl");this.apiKey=e,this.baseUrl=t}async fetchData(e){try{const t=await fetch(`${this.baseUrl}${e}&appid=${this.apiKey}`);if(!t.ok)throw new Error("City not found");return await t.json()}catch(t){throw t}}}class I{processWeatherData(e){const t={},a={},s=e.list[0].dt_txt.split(" ")[0].split("-")[2];return e.list.forEach(r=>{const n=r.dt_txt.split(" ")[0].split("-")[2],l=Math.round(r.main.temp_max-273.15),m=r.dt_txt.split(" ")[1];n!==s&&(t[n]?l>t[n]&&(t[n]=l):t[n]=l,m==="15:00:00"&&(a[n]=r.weather[0].main))}),{maxTemperatureByDay:t,iconsByDay:a}}}class b{constructor(){o(this,"wrapper");o(this,"weather");o(this,"weatherIcon");o(this,"degrees");o(this,"cityName");o(this,"parameters");o(this,"speedWind");o(this,"humidity");o(this,"errorMessage");o(this,"weekCard");o(this,"forecastInscription");this.wrapper=document.querySelector(".wrapper"),this.weather=document.querySelector(".weather"),this.weatherIcon=document.querySelector(".weather__icon"),this.degrees=document.querySelector(".weather__degrees"),this.cityName=document.querySelector(".weather__city"),this.parameters=document.querySelector(".parameters"),this.speedWind=document.querySelector(".parameters__speed-wind"),this.humidity=document.querySelector(".parameters__humidity"),this.errorMessage=document.querySelector(".error-message"),this.weekCard=document.querySelector(".week"),this.forecastInscription=document.querySelector(".forecast-inscription")}updateUI(e){this.degrees.innerHTML=Math.floor(e.list[0].main.temp-273.15)+"&#176;",this.cityName.innerHTML=e.city.name,this.speedWind.innerHTML="wind: "+e.list[0].wind.speed+"m/s",this.humidity.innerHTML="humidity: "+e.list[0].main.humidity+"%",this.weather.style.display="flex",this.weatherIcon.style.display="flex",this.parameters.style.display="flex",this.errorMessage.style.display="none";const t=e.list[0].weather[0].main;this.setBackgroundAndIcon(t)}setBackgroundAndIcon(e){const t={Clouds:{background:"src/assets/images/clouds.jpg",icon:"src/assets/icons/cloudsIcon.png"},Clear:{background:"src/assets/images/clearSky.jpg",icon:"src/assets/icons/sunIcon.png"},Rain:{background:"assets/images/rain.jpg",icon:"src/assets/icons/rainIcon.png"},Mist:{background:"src/assets/images/mist.png",icon:"src/assets/icons/mistIcon.png"},Haze:{background:"src/assets/images/haze.jpg",icon:"src/assets/icons/hazeIcon.png"},default:{background:"none",icon:"src/assets/icons/defaultIcon.png"}},{background:a,icon:s}=t[e]||t.default;this.wrapper.style.backgroundImage=`url('${a}')`,this.weatherIcon.src=s}createWeekCard(e,t){this.weekCard.textContent="",this.weekCard.style.display="flex";let a=0;for(const[s,r]of Object.entries(e)){if(a>=4)break;const n=document.createElement("div");n.className="card",n.innerHTML=`
        <h3>${s}</h3>
        <img src="${this.getIconSrc(t[s])}" alt="${t[s]}"/>
        <p>${r}Â°</p>
      `,this.forecastInscription.style.display="block",this.weekCard.appendChild(n),a++}}getIconSrc(e){const t={Clouds:"src/assets/icons/cloudsIcon.png",Clear:"src/assets/icons/sunIcon.png",Rain:"src/assets/icons/rainIcon.png",Mist:"src/assets/icons/mistIcon.png",Haze:"src/assets/icons/hazeIcon.png",default:"src/assets/icons/defaultIcon.png"};return t[e]||t.default}showError(e){this.weekCard.textContent="",this.errorMessage.textContent=`City: '${e}' not found`,this.errorMessage.style.display="block",this.weather.style.display="none",this.parameters.style.display="none",this.forecastInscription.style.display="none",this.wrapper.style.backgroundImage="none"}}const k="7023c4f8b61573243ceb881918b43235",S="https://api.openweathermap.org/data/2.5/forecast?q=",_=new w(k,S),C=new I,u=new b,i=document.querySelector(".search__input"),p=document.querySelector(".search__btn--icon"),h=document.querySelector(".myForm"),d=document.querySelector(".loader");i&&p&&h&&d&&(p.addEventListener("click",y),h.addEventListener("submit",y));async function y(c){if(c&&i){c.preventDefault();const e=i.value.trim();if(e){d&&(d.style.display="block");try{const t=await _.fetchData(e);u.updateUI(t);const{maxTemperatureByDay:a,iconsByDay:s}=C.processWeatherData(t);u.createWeekCard(a,s)}catch{u.showError(e)}finally{i&&d&&(i.value="",d.style.display="none")}}}}
