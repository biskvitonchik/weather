var f=Object.defineProperty;var g=(c,e,t)=>e in c?f(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var o=(c,e,t)=>(g(c,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();class w{constructor(e,t){o(this,"apiKey");o(this,"baseUrl");this.apiKey=e,this.baseUrl=t}async fetchData(e){try{const t=await fetch(`${this.baseUrl}${e}&appid=${this.apiKey}`);if(!t.ok)throw new Error("City not found");return await t.json()}catch(t){throw t}}}class b{processWeatherData(e){const t={},i={},r=e.list[0].dt_txt.split(" ")[0].split("-")[2];return e.list.forEach(s=>{const n=s.dt_txt.split(" ")[0].split("-")[2],u=Math.round(s.main.temp_max-273.15),m=s.dt_txt.split(" ")[1];n!==r&&(t[n]?u>t[n]&&(t[n]=u):t[n]=u,m==="15:00:00"&&(i[n]=s.weather[0].main))}),{maxTemperatureByDay:t,iconsByDay:i}}}class I{constructor(){o(this,"wrapper");o(this,"weather");o(this,"weatherIcon");o(this,"degrees");o(this,"cityName");o(this,"parameters");o(this,"speedWind");o(this,"humidity");o(this,"errorMessage");o(this,"weekCard");o(this,"forecastInscription");this.wrapper=document.querySelector(".wrapper"),this.weather=document.querySelector(".weather"),this.weatherIcon=document.querySelector(".weather__icon"),this.degrees=document.querySelector(".weather__degrees"),this.cityName=document.querySelector(".weather__city"),this.parameters=document.querySelector(".parameters"),this.speedWind=document.querySelector(".parameters__speed-wind"),this.humidity=document.querySelector(".parameters__humidity"),this.errorMessage=document.querySelector(".error-message"),this.weekCard=document.querySelector(".week"),this.forecastInscription=document.querySelector(".forecast-inscription")}updateUI(e){this.degrees.innerHTML=Math.floor(e.list[0].main.temp-273.15)+"&#176;",this.cityName.innerHTML=e.city.name,this.speedWind.innerHTML="wind: "+e.list[0].wind.speed+"m/s",this.humidity.innerHTML="humidity: "+e.list[0].main.humidity+"%",this.weather.style.display="flex",this.weatherIcon.style.display="flex",this.parameters.style.display="flex",this.errorMessage.style.display="none";const t=e.list[0].weather[0].main;this.setBackgroundAndIcon(t)}setBackgroundAndIcon(e){const t={Clouds:{background:"public/images/clouds.jpg",icon:"public/icons/cloudsIcon.png"},Clear:{background:"public/images/clearSky.jpg",icon:"public/icons/sunIcon.png"},Rain:{background:"public/images/rain.jpg",icon:"public/icons/rainIcon.png"},Mist:{background:"public/images/mist.png",icon:"public/icons/mistIcon.png"},Haze:{background:"public/images/haze.jpg",icon:"public/icons/hazeIcon.png"},default:{background:"none",icon:"public/icons/defaultIcon.png"}},{background:i,icon:r}=t[e]||t.default;this.wrapper.style.backgroundImage=`url('${i}')`,this.weatherIcon.src=r}createWeekCard(e,t){this.weekCard.textContent="",this.weekCard.style.display="flex";let i=0;for(const[r,s]of Object.entries(e)){if(i>=4)break;const n=document.createElement("div");n.className="card",n.innerHTML=`
        <h3>${r}</h3>
        <img src="${this.getIconSrc(t[r])}" alt="${t[r]}"/>
        <p>${s}Â°</p>
      `,this.forecastInscription.style.display="block",this.weekCard.appendChild(n),i++}}getIconSrc(e){const t={Clouds:"public/icons/cloudsIcon.png",Clear:"public/icons/sunIcon.png",Rain:"public/icons/rainIcon.png",Mist:"public/icons/mistIcon.png",Haze:"public/icons/hazeIcon.png",default:"public/icons/defaultIcon.png"};return t[e]||t.default}showError(e){this.weekCard.textContent="",this.errorMessage.textContent=`City: '${e}' not found`,this.errorMessage.style.display="block",this.weather.style.display="none",this.parameters.style.display="none",this.forecastInscription.style.display="none",this.wrapper.style.backgroundImage="none"}}const k="7023c4f8b61573243ceb881918b43235",S="https://api.openweathermap.org/data/2.5/forecast?q=",_=new w(k,S),C=new b,d=new I,a=document.querySelector(".search__input"),p=document.querySelector(".search__btn--icon"),h=document.querySelector(".myForm"),l=document.querySelector(".loader");a&&p&&h&&l&&(p.addEventListener("click",y),h.addEventListener("submit",y));async function y(c){if(c&&a){c.preventDefault();const e=a.value.trim();if(e){l&&(l.style.display="block");try{const t=await _.fetchData(e);d.updateUI(t);const{maxTemperatureByDay:i,iconsByDay:r}=C.processWeatherData(t);d.createWeekCard(i,r)}catch{d.showError(e)}finally{a&&l&&(a.value="",l.style.display="none")}}}}
