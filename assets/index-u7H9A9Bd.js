var m=Object.defineProperty;var w=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var o=(n,e,t)=>(w(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class g{constructor(e,t){o(this,"apiKey");o(this,"baseUrl");this.apiKey=e,this.baseUrl=t}async fetchData(e){try{const t=await fetch(`${this.baseUrl}${e}&appid=${this.apiKey}`);if(!t.ok)throw new Error("City not found");return await t.json()}catch(t){throw t}}}class I{processWeatherData(e){const t={},c={},s=e.list[0].dt_txt.split(" ")[0].split("-")[2];return e.list.forEach(r=>{const a=r.dt_txt.split(" ")[0].split("-")[2],l=Math.round(r.main.temp_max-273.15),f=r.dt_txt.split(" ")[1];a!==s&&(t[a]?l>t[a]&&(t[a]=l):t[a]=l,f==="15:00:00"&&(c[a]=r.weather[0].main))}),{maxTemperatureByDay:t,iconsByDay:c}}}class b{constructor(){o(this,"wrapper");o(this,"weather");o(this,"weatherIcon");o(this,"degrees");o(this,"cityName");o(this,"parameters");o(this,"speedWind");o(this,"humidity");o(this,"errorMessage");o(this,"weekCard");o(this,"forecastInscription");this.wrapper=document.querySelector(".wrapper"),this.weather=document.querySelector(".weather"),this.weatherIcon=document.querySelector(".weather__icon"),this.degrees=document.querySelector(".weather__degrees"),this.cityName=document.querySelector(".weather__city"),this.parameters=document.querySelector(".parameters"),this.speedWind=document.querySelector(".parameters__speed-wind"),this.humidity=document.querySelector(".parameters__humidity"),this.errorMessage=document.querySelector(".error-message"),this.weekCard=document.querySelector(".week"),this.forecastInscription=document.querySelector(".forecast-inscription")}updateUI(e){this.degrees.innerHTML=Math.floor(e.list[0].main.temp-273.15)+"&#176;",this.cityName.innerHTML=e.city.name,this.speedWind.innerHTML="wind: "+e.list[0].wind.speed+"m/s",this.humidity.innerHTML="humidity: "+e.list[0].main.humidity+"%",this.weather.style.display="flex",this.weatherIcon.style.display="flex",this.parameters.style.display="flex",this.errorMessage.style.display="none";const t=e.list[0].weather[0].main;this.setBackgroundAndIcon(t)}setBackgroundAndIcon(e){const t={Clouds:{background:"/weather-forecast/src/assets/images/clouds.jpg",icon:"/weather-forecast/src/assets/icons/cloudsIcon.png"},Clear:{background:"/weather-forecast/src/assets/images/clearSky.jpg",icon:"/weather-forecast/src/assets/icons/sunIcon.png"},Rain:{background:"/weather-forecast/src/assets/images/rain.jpg",icon:"/weather-forecast/src/assets/icons/rainIcon.png"},Mist:{background:"/weather-forecast/src/assets/images/mist.png",icon:"/weather-forecast/src/assets/icons/mistIcon.png"},Haze:{background:"/weather-forecast/src/assets/images/haze.jpg",icon:"/weather-forecast/src/assets/icons/hazeIcon.png"},default:{background:"none",icon:"/weather-forecast/src/assets/icons/defaultIcon.png"}},{background:c,icon:s}=t[e]||t.default;this.wrapper.style.backgroundImage=`url('${c}')`,this.weatherIcon.src=s}createWeekCard(e,t){this.weekCard.textContent="",this.weekCard.style.display="flex";let c=0;for(const[s,r]of Object.entries(e)){if(c>=4)break;const a=document.createElement("div");a.className="card",a.innerHTML=`
        <h3>${s}</h3>
        <img src="${this.getIconSrc(t[s])}" alt="${t[s]}"/>
        <p>${r}Â°</p>
      `,this.forecastInscription.style.display="block",this.weekCard.appendChild(a),c++}}getIconSrc(e){const t={Clouds:"/weather-forecast/src/assets/icons/cloudsIcon.png",Clear:"/weather-forecast/src/assets/icons/sunIcon.png",Rain:"/weather-forecast/src/assets/icons/rainIcon.png",Mist:"/weather-forecast/src/assets/icons/mistIcon.png",Haze:"/weather-forecast/src/assets/icons/hazeIcon.png",default:"/weather-forecast/src/assets/icons/defaultIcon.png"};return t[e]||t.default}showError(e){this.weekCard.textContent="",this.errorMessage.textContent=`City: '${e}' not found`,this.errorMessage.style.display="block",this.weather.style.display="none",this.parameters.style.display="none",this.forecastInscription.style.display="none",this.wrapper.style.backgroundImage="none"}}const k="7023c4f8b61573243ceb881918b43235",S="https://api.openweathermap.org/data/2.5/forecast?q=",_=new g(k,S),C=new I,h=new b,i=document.querySelector(".search__input"),u=document.querySelector(".search__btn--icon"),p=document.querySelector(".myForm"),d=document.querySelector(".loader");i&&u&&p&&d&&(u.addEventListener("click",y),p.addEventListener("submit",y));async function y(n){if(n&&i){n.preventDefault();const e=i.value.trim();if(e){d&&(d.style.display="block");try{const t=await _.fetchData(e);h.updateUI(t);const{maxTemperatureByDay:c,iconsByDay:s}=C.processWeatherData(t);h.createWeekCard(c,s)}catch{h.showError(e)}finally{i&&d&&(i.value="",d.style.display="none")}}}}
